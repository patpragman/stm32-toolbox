#include "hal_delay.h"

static inline void delay_cycles(volatile uint32_t cycles)
{
    while (cycles--)
    {
        __asm__ volatile("nop");
    }
}

void hal_delay_ms(uint32_t ms)
{
    uint32_t cycles_per_ms = {{ system_clock_hz }}U / 4000U;
    if (cycles_per_ms == 0U)
    {
        cycles_per_ms = 1U;
    }

    while (ms--)
    {
        delay_cycles(cycles_per_ms);
    }
}
